IF(APPLE)
  SET(EXECUTABLE_FLAG MACOSX_BUNDLE)
ENDIF(APPLE)

# Convenience macros
MACRO(ADD_IRTK_EXECUTABLE name)
  ADD_EXECUTABLE(${name} ${name}.cc ${ARGN})
  INSTALL_TARGETS(/bin ${name})
ENDMACRO(ADD_IRTK_EXECUTABLE name)

MACRO(ADD_CONDOR_EXECUTABLE name)
  ADD_EXECUTABLE(${name}.condor ${name}.cc ${ARGN})
  INSTALL_TARGETS(/bin ${name}.condor)
ENDMACRO(ADD_CONDOR_EXECUTABLE name)

IF (BUILD_CONDOR_EXE)

  #  SET (CMAKE_CXX_COMPILER "condor_compile ${CMAKE_CXX_COMPILER}")
  # This is a hack since the line above doesn't work: this local 
  # scripts executes condor_compile with the option "c++". That means,
  # the variable CMAKE_CXX_COMPILER defined in ccmake is not taken 
  # into account!
  SET (CMAKE_CXX_COMPILER "${IRTK_SOURCE_DIR}/condor_compile.sh")

  ADD_CONDOR_EXECUTABLE(areg)
  ADD_CONDOR_EXECUTABLE(nreg)
  ADD_CONDOR_EXECUTABLE(rreg)
  ADD_CONDOR_EXECUTABLE(areg2)
  ADD_CONDOR_EXECUTABLE(cnreg2)
  ADD_CONDOR_EXECUTABLE(nreg2)
  ADD_CONDOR_EXECUTABLE(rreg2)
  ADD_CONDOR_EXECUTABLE(transformation)
  ADD_CONDOR_EXECUTABLE(transformation2)
  ADD_CONDOR_EXECUTABLE(approximate)
  ADD_CONDOR_EXECUTABLE(atlas)
  ADD_CONDOR_EXECUTABLE(dof2mat)
  ADD_CONDOR_EXECUTABLE(dofsubtract)
  ADD_CONDOR_EXECUTABLE(jacobian)
  ADD_CONDOR_EXECUTABLE(hreg)
  ADD_CONDOR_EXECUTABLE(subtract)
  ADD_CONDOR_EXECUTABLE(volumechange)

ELSE(BUILD_CONDOR_EXE)
 
  ADD_IRTK_EXECUTABLE(areg)
  ADD_IRTK_EXECUTABLE(areg2)
  #ADD_IRTK_EXECUTABLE(areg2_multiple)
  ADD_IRTK_EXECUTABLE(approximate)
  ADD_IRTK_EXECUTABLE(approximate4D)
  ADD_IRTK_EXECUTABLE(atlas)
  ADD_IRTK_EXECUTABLE(bisect_dof)
  ADD_IRTK_EXECUTABLE(cnreg2)
  ADD_IRTK_EXECUTABLE(compare)
  ADD_IRTK_EXECUTABLE(computeTFFD)
  ADD_IRTK_EXECUTABLE(computeTSFFD)
  ADD_IRTK_EXECUTABLE(currents_distance)
  ADD_IRTK_EXECUTABLE(demons)
  ADD_IRTK_EXECUTABLE(defmap)
  ADD_IRTK_EXECUTABLE(dof2image)
  ADD_IRTK_EXECUTABLE(dof2vtk)
  ADD_IRTK_EXECUTABLE(dof2flirt)
  ADD_IRTK_EXECUTABLE(dofcombine)
  ADD_IRTK_EXECUTABLE(dofcomposeN)
  ADD_IRTK_EXECUTABLE(dofaverage)
  ADD_IRTK_EXECUTABLE(dofinvert)
  ADD_IRTK_EXECUTABLE(dof2mat)
  ADD_IRTK_EXECUTABLE(dofimport)
  ADD_IRTK_EXECUTABLE(dofexport)
  ADD_IRTK_EXECUTABLE(dofprint)
  ADD_IRTK_EXECUTABLE(dofsubtract)
  ADD_IRTK_EXECUTABLE(evaluation)
  ADD_IRTK_EXECUTABLE(evaluation4D)
  ADD_IRTK_EXECUTABLE(ffd2D)
  ADD_IRTK_EXECUTABLE(ffd2vtk)
  ADD_IRTK_EXECUTABLE(ffdadd)
  ADD_IRTK_EXECUTABLE(ffdaverage)
  ADD_IRTK_EXECUTABLE(ffdboundary)
  ADD_IRTK_EXECUTABLE(ffdcollapse)
  ADD_IRTK_EXECUTABLE(ffdcompose)
  ADD_IRTK_EXECUTABLE(ffdcomposeN)
  ADD_IRTK_EXECUTABLE(ffdcreate)
  ADD_IRTK_EXECUTABLE(ffddecompose)
  ADD_IRTK_EXECUTABLE(ffddelete)
  ADD_IRTK_EXECUTABLE(ffdedit)
  ADD_IRTK_EXECUTABLE(ffdinfo)
  ADD_IRTK_EXECUTABLE(ffdinvert)
  ADD_IRTK_EXECUTABLE(ffdmovie)
  ADD_IRTK_EXECUTABLE(ffdpadding)
  ADD_IRTK_EXECUTABLE(ffdsubdivide)
  ADD_IRTK_EXECUTABLE(ffdsubtract)
  ADD_IRTK_EXECUTABLE(ffdtransform)
  ADD_IRTK_EXECUTABLE(flirt2dof)
  # NOTE The fluid executable (fluid.cc) is intentionally excluded as it
  #      is deprecated and should not be used. In fact, the executable
  #      already only outputs that it should not be used and exits with
  #      an error doing nothing. Moreover, the target name "fluid" conflicts
  #      with the fluid executable target imported from the FLTK
  #      (see also <fltk-prefix>/lib/FLTK-1.3/FLTKLibraries.cmake).
  #      --andreas (as12312)
  ##ADD_IRTK_EXECUTABLE(fluid)
  ADD_IRTK_EXECUTABLE(gradientnreg2)
  ADD_IRTK_EXECUTABLE(gridevaluation)
  ADD_IRTK_EXECUTABLE(gridtransformation)
  ADD_IRTK_EXECUTABLE(headertool)
  ADD_IRTK_EXECUTABLE(hreg)
  ADD_IRTK_EXECUTABLE(image2dof)
  ADD_IRTK_EXECUTABLE(jacobian)
  ADD_IRTK_EXECUTABLE(largedeformations)
  ADD_IRTK_EXECUTABLE(largedeformationsShoot)
  ADD_IRTK_EXECUTABLE(largedeformationsTools)
  ADD_IRTK_EXECUTABLE(LEAPatlas_selection)
  ADD_IRTK_EXECUTABLE(LEAPprobabilistic_atlas)
  ADD_IRTK_EXECUTABLE(LEAPsimilarity_2)
  ADD_IRTK_EXECUTABLE(mat2dof)
  ADD_IRTK_EXECUTABLE(mareg)
  ADD_IRTK_EXECUTABLE(mnreg)
  ADD_IRTK_EXECUTABLE(motiontrack)
  ADD_IRTK_EXECUTABLE(motiontrack2)
  ADD_IRTK_EXECUTABLE(motiontrackmultimage)
  #ADD_IRTK_EXECUTABLE(motiontrackmultimage2)
  ADD_IRTK_EXECUTABLE(mrreg)
  ADD_IRTK_EXECUTABLE(msareg)
  ADD_IRTK_EXECUTABLE(mshreg)
  ADD_IRTK_EXECUTABLE(msnreg)
  ADD_IRTK_EXECUTABLE(msrreg)
  ADD_IRTK_EXECUTABLE(normalize)
  ADD_IRTK_EXECUTABLE(nreg)
  ADD_IRTK_EXECUTABLE(nreg2)
  #ADD_IRTK_EXECUTABLE(nreg2_multiple)
  ADD_IRTK_EXECUTABLE(pareg)
  ADD_IRTK_EXECUTABLE(pcaloo)
  ADD_IRTK_EXECUTABLE(pcanalysis)
  ADD_IRTK_EXECUTABLE(pcmodes)
  ADD_IRTK_EXECUTABLE(pevaluation)
  ADD_IRTK_EXECUTABLE(phreg)
  ADD_IRTK_EXECUTABLE(pnreg)
  ADD_IRTK_EXECUTABLE(prreg)
  ADD_IRTK_EXECUTABLE(ptransformation)
  ADD_IRTK_EXECUTABLE(rreg)
  ADD_IRTK_EXECUTABLE(rreg2)
  #ADD_IRTK_EXECUTABLE(rreg2_multiple)
  ADD_IRTK_EXECUTABLE(sareg)
  ADD_IRTK_EXECUTABLE(sevaluation)
  ADD_IRTK_EXECUTABLE(shreg)
  ADD_IRTK_EXECUTABLE(shreg_multipleDOFs)
  ADD_IRTK_EXECUTABLE(snreg)
  ADD_IRTK_EXECUTABLE(sparse_nreg)
  ADD_IRTK_EXECUTABLE(srreg)
  ADD_IRTK_EXECUTABLE(stransformation)
  ADD_IRTK_EXECUTABLE(subtract)
  ADD_IRTK_EXECUTABLE(symnreg)
  ADD_IRTK_EXECUTABLE(temporalextract)
  ADD_IRTK_EXECUTABLE(transformation)
  ADD_IRTK_EXECUTABLE(transformation2)
  ADD_IRTK_EXECUTABLE(trans_uncertainty)
  ADD_IRTK_EXECUTABLE(volumechange)
  ADD_IRTK_EXECUTABLE(vtk2ffd)	

ENDIF (BUILD_CONDOR_EXE)
